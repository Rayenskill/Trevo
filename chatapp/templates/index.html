<!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <title>Chat Lobby</title>
    </head>

    <body>
        <h1>Chat app</h1>

        <script type="text/javascript">
            // https://www.youtube.com/watch?v=cw8-KFVXpTE
            // ws: instead of http: for a WebSocket a persistent two-way connection
            // window.location is a JS variable that contains the current root URL ex. example.com or 127.0.0.1:8000
            // ws/socket-server/ This is the specific path on the server where the Django WebSocket "consumer" is listening.
            let url = `ws://${window.location}/ws/socket-server/`;

            // triggering a WebSocket connection which takes the URL as an argument.
            const chatSocket = new WebSocket(url);

            // When a message arrives on this specific chatSocket connection, run this function.
            // The e is the event object, which contains all the information about the incoming message.
            // JSON.parse converts the e object into a JSON object which can then be manipulated in JS more freely.
            // This is an event listener, always listening on the ongoing WebSocket connection established when this code is executed.
            // i.e. when the page is rendered.
            
            chatSocket.onmessage = function(e){
                let data = JSON.parse(e.data)
                console.log('Data: ', data)
            }


        </script>
    </body>
</html>


